<div class="assessment-page">
    <div class="assessment-container">
        <div class="question-card">
            <div class="question-header">
                <span class="question-number">Question {{ currentQuestionIndex() + 1 }} of {{ questions.length }}</span>
                <span class="time-remaining"><i class="pi pi-clock"></i> 45:00</span>
            </div>

            <div class="question-content">
                <h3>{{ currentQuestion.text }}</h3>

                @if (!currentQuestion.type || currentQuestion.type === 'mcq') {
                <div class="options-list">
                    @for (option of currentQuestion.options; track option.value) {
                    <label class="option">
                        <input type="radio" [name]="'q' + currentQuestion.id" [value]="option.value"
                            [(ngModel)]="currentQuestion.selectedOption" />
                        <span>{{ option.label }}</span>
                    </label>
                    }
                </div>
                }

                @if (currentQuestion.type === 'text') {
                <div class="text-answer-section">
                    @if (currentQuestion.pdfUrl) {
                    <div class="pdf-link">
                        <i class="pi pi-file-pdf"></i>
                        <a [href]="currentQuestion.pdfUrl" target="_blank">View Reference Document</a>
                    </div>
                    }
                    <div class="answer-area">
                        <label>Your Answer</label>
                        <textarea [(ngModel)]="currentQuestion.textAnswer" rows="6"
                            placeholder="Type your answer here..." class="form-control"></textarea>
                    </div>
                </div>
                }
            </div>

            <div class="question-actions">
                <button class="btn btn-secondary" (click)="prevQuestion()" [disabled]="isFirstQuestion"
                    [class.disabled]="isFirstQuestion">
                    Previous
                </button>

                @if (isLastQuestion) {
                <button class="btn btn-primary submit-btn" (click)="submitAssessment()">Submit</button>
                } @else {
                <button class="btn btn-primary" (click)="nextQuestion()">Next</button>
                }
            </div>
        </div>
    </div>
</div>