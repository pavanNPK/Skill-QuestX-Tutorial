<div class="dashboard-container">
  <div class="dashboard-content">
    <!-- Main Content Area -->
    <div class="main-area">
      <!-- Course Overview Section -->
      <div class="overview-grid">
        @for (card of courseOverview; track card.title) {
        <div class="premium-summary-card">
          <div class="card-icon-wrapper" [style.color]="card.color" [style.background-color]="card.bg">
            <i [class]="card.icon"></i>
          </div>
          <div class="card-content">
            <div class="card-count">{{card.count}}</div>
            <div class="card-title">{{card.title}}</div>
            <div class="card-subtitle">{{card.subtitle}}</div>
          </div>
          <div class="card-action">
            <span>View</span>
            <i class="pi pi-arrow-right"></i>
          </div>
        </div>
        }
      </div>

      <!-- Premium Banner Carousel -->
      <div class="banner-carousel-section">
        <p-carousel [value]="dashboardBanners" [numVisible]="1" [numScroll]="1" [circular]="true"
          [autoplayInterval]="5000" [showIndicators]="false">
          <ng-template let-banner pTemplate="item">
            <div class="premium-banner"
              [style.background]="'linear-gradient(135deg, ' + banner.color + ' 0%, ' + adjustColor(banner.color, -30) + ' 100%)'">
              <div class="banner-content">
                <span class="banner-subtitle">{{banner.subtitle}}</span>
                <h2 class="banner-title">{{banner.title}}</h2>
                <p class="banner-desc">{{banner.description}}</p>
                <button pButton [label]="banner.buttonText"
                  class="banner-btn p-button-raised p-button-rounded"></button>
              </div>
              <div class="banner-visual">
                <!-- abstract shapes or illustration placeholder -->
                <div class="circle-shape"></div>
                <div class="glass-card">
                  <i class="pi pi-bolt" style="font-size: 2rem; color: white;"></i>
                </div>
              </div>
            </div>
          </ng-template>
        </p-carousel>
      </div>

      <!-- Extensions Grid (Exams & Projects) -->
      <div class="extensions-grid">
        <!-- Recent Exam Results -->
        <div class="extension-card">
          <div class="card-header">
            <h3 class="section-title">Recent Exam Results</h3>
            <button class="view-all-btn">View All</button>
          </div>
          <div class="exam-list">
            @for (exam of examResults; track exam.subject) {
            <div class="exam-item">
              <div class="exam-icon" [style.background-color]="exam.color + '20'" [style.color]="exam.color">
                <i [class]="exam.icon"></i>
              </div>
              <div class="exam-details">
                <h4 class="exam-subject">{{exam.subject}}</h4>
                <span class="exam-date">{{exam.date}}</span>
              </div>
              <div class="exam-score">
                <span class="grade" [style.color]="exam.color">{{exam.grade}}</span>
                <span class="score-text">{{exam.score}}/{{exam.total}}</span>
              </div>
            </div>
            }
          </div>
        </div>

        <!-- Active Projects -->
        <div class="extension-card">
          <div class="card-header">
            <h3 class="section-title">Active Projects</h3>
            <button class="view-all-btn">View All</button>
          </div>
          <div class="project-list">
            @for (project of activeProjects; track project.title) {
            <div class="project-item">
              <div class="project-info">
                <h4 class="project-title">{{project.title}}</h4>
                <span class="project-due">Due: {{project.dueDate}}</span>
              </div>
              <div class="project-status">
                <div class="progress-bar">
                  <div class="fill" [style.width.%]="project.progress" [style.background-color]="project.statusColor">
                  </div>
                </div>
                <span class="status-badge" [style.background-color]="project.statusColor + '20'"
                  [style.color]="project.statusColor">
                  {{project.status}}
                </span>
              </div>
            </div>
            }
          </div>
        </div>
      </div>

      <!-- Feedbacks (Full Width) -->
      <div class="feedbacks-section">
        <div class="feedbacks-card">
          <div class="card-header">
            <h3 class="section-title">Feedbacks</h3>
            <button class="view-all-btn">View All</button>
          </div>
          <div class="feedback-item">
            <div class="feedback-header">
              <div class="author-info">
                <img src="/assets/images/avatar-2.jpg" alt="Author" class="author-avatar"
                  onError="this.src='/assets/images/default-avatar.png'">
                <div>
                  <h4 class="feedback-author">Charil Polamraju</h4>
                  <span class="feedback-role">Student</span>
                </div>
              </div>
              <div class="feedback-rating">
                <i class="pi pi-star-fill"></i>
                <i class="pi pi-star-fill"></i>
                <i class="pi pi-star-fill"></i>
                <i class="pi pi-star-fill"></i>
                <i class="pi pi-star"></i>
              </div>
            </div>
            <p class="feedback-text">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut et massa mi.
              Aliquam in hendrerit urna. Pellentesque sit amet sapien fringilla, mattis ligula
              consectetur, ultrices mauris. Maecenas vitae mattis tellus.
            </p>
          </div>
        </div>
      </div>

      <!-- Tasks Table -->
      <div class="tasks-section">
        <h3 class="section-title">Tasks</h3>
        <div class="tasks-table">
          <div class="table-header">
            <div class="th th-num">#</div>
            <div class="th th-name">Task Name</div>
            <div class="th th-timeline">Timeline</div>
          </div>
          <div class="table-body">
            @for (task of tasks; track task.id) {
            <div class="table-row">
              <div class="td td-num">{{ task.id }}</div>
              <div class="td td-name">{{ task.name }}</div>
              <div class="td td-timeline">{{ task.timeline }}</div>
            </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar Area -->
    <div class="sidebar-area">
      <!-- Course Progress -->
      <div class="progress-card">
        <h3 class="section-title">Course Progress</h3>
        <div class="progress-chart">
          <svg viewBox="0 0 200 200" class="donut-chart">
            <circle cx="100" cy="100" r="80" fill="none" stroke="#F3F4F6" stroke-width="15"></circle>
            <circle cx="100" cy="100" r="80" fill="none" stroke="#6C5CE7" stroke-width="15"
              [attr.stroke-dasharray]="(progressPercentage * 5.027) + ' 502.7'" stroke-linecap="round"
              transform="rotate(-90 100 100)"></circle>
            <text x="100" y="100" dy=".3em" text-anchor="middle" font-size="28" font-weight="700"
              fill="#1f2937">{{progressPercentage | number:'1.0-0'}}%</text>
          </svg>
          <div class="progress-legend">
            <div class="legend-item">
              <span class="legend-dot" style="background-color: #6C5CE7"></span>
              <span>Completed</span>
            </div>
            <div class="legend-item">
              <span class="legend-dot" style="background-color: #F3F4F6"></span>
              <span>Remaining</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Calendar Widget -->
      <div class="calendar-widget">
        <div class="calendar-header">
          <button class="calendar-nav" (click)="previousMonth()"><i class="pi pi-angle-left"></i></button>
          <span class="calendar-month">{{ currentMonth }}</span>
          <button class="calendar-nav" (click)="nextMonth()"><i class="pi pi-angle-right"></i></button>
        </div>
        <div class="calendar-grid">
          <div class="calendar-day-label">Su</div>
          <div class="calendar-day-label">Mo</div>
          <div class="calendar-day-label">Tu</div>
          <div class="calendar-day-label">We</div>
          <div class="calendar-day-label">Th</div>
          <div class="calendar-day-label">Fr</div>
          <div class="calendar-day-label">Sa</div>

          @for (day of calendarDays; track $index) {
          <div class="calendar-day" [class.empty]="!day" [class.active]="day === selectedDay"
            [class.today]="isToday(day)" (click)="selectDay(day)">
            {{ day || '' }}
          </div>
          }
        </div>
      </div>

      <!-- Job Board -->
      <div class="job-board-widget">
        <h3 class="widget-title">Job-Board ðŸš€</h3>
        @for (job of jobs; track job.title) {
        <div class="job-card" [class.locked]="job.locked">
          @if (job.locked) {
          <div class="lock-overlay">
            <div class="lock-icon-wrapper">
              <i class="pi pi-lock"></i>
            </div>
          </div>
          }
          <h4 class="job-title">{{ job.title }}</h4>
          <div class="job-detail">
            <i class="pi pi-map-marker"></i>
            <span>Location: {{ job.location }}</span>
          </div>
          <div class="job-detail">
            <i class="pi pi-briefcase"></i>
            <span>Type: {{ job.type }}</span>
          </div>
          <div class="job-detail">
            <i class="pi pi-globe"></i>
            <span>Website: {{ job.website }}</span>
          </div>
        </div>
        }
      </div>

      <!-- Top Students -->
      <div class="students-widget">
        <div class="widget-header">
          <h3 class="widget-title">Top Students</h3>
          <span class="view-all-text">View All</span>
        </div>
        <div class="student-list">
          @for (student of students; track student.name) {
          <div class="student-item">
            <div class="rank-badge" [class.top-3]="student.rank <= 3">{{student.rank}}</div>
            <div class="student-avatar">
              <img [src]="student.image" alt="Student" onError="this.src='/assets/images/default-avatar.png'">
            </div>
            <div class="student-info">
              <h4 class="student-name">{{student.name}}</h4>
              <span class="student-points">{{student.score}} pts</span>
            </div>
            <div class="student-trend">
              @if(student.trend === 'up') { <i class="pi pi-arrow-up" style="color: #10B981"></i> }
              @if(student.trend === 'down') { <i class="pi pi-arrow-down" style="color: #EF4444"></i> }
              @if(student.trend === 'neutral') { <i class="pi pi-minus" style="color: #9CA3AF"></i> }
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>